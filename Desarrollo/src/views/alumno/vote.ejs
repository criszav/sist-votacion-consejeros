<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/pages.css">
    <script>
        function toggleButton() {
            var submit = $('#submit').val();
            if (submit) {
                $('#btn-vote').attr('disabled', false);
            } else {
                $('#btn-vote').attr('disabled', true);
            }
        }
    </script>
    <title>Votar</title>
</head>
<header>
    <nav class="header-form">
        <div class="logoimg">
            <img src="https://www.duoc.cl/wp-content/themes/wordpress-duoc-cl/images/logo-duoc.svg" width="200"
                height="50">
        </div>
        <a href="/logout"><input type="button" value="Cerrar Sesion" class="btn-logout"></a>
    </nav>
</header>

<body>
    <div class="contenido">
        <div class="wrapper">
            <nav class="sidebar">
                <ul>
                    <li>
                        <a href="/inicio" class="">
                            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
                                    <path
                                        d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z" />
                                </svg></span>
                            <span class="item">Inicio</span>
                        </a>
                    </li>
                    <li>
                        <a href="/inicio/postular" class="">
                            <span class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                    <path
                                        d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                    <path fill-rule="evenodd"
                                        d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                                </svg></span>
                            <span class="item">Postular</span>
                        </a>
                    </li>
                    <li>
                        <a href="/inicio/postulantes" class="">
                            <span class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                        d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                                </svg></span>
                            <span class="item">Lista de postulantes</span>
                        </a>
                    </li>
                    <li>
                        <a href="/inicio/votar" class="active">
                            <span class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-box2-fill" viewBox="0 0 16 16">
                                    <path
                                        d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4h-8.5ZM15 4.667V5H1v-.333L1.5 4h6V1h1v3h6l.5.667Z" />
                                </svg></span>
                            <span class="item">Votar</span>
                        </a>
                    </li>
                    <li>
                        <a href="/inicio/resultados" class="">
                            <span class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-clipboard-data-fill" viewBox="0 0 16 16">
                                    <path
                                        d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z" />
                                    <path
                                        d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1ZM10 8a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V8Zm-6 4a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm4-3a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1Z" />
                                </svg></span>
                            <span class="item">Resultados</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/inicio/consejeros-electos" class="">
                            <span class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    fill="currentColor" class="bi bi-person-fill-check" viewBox="0 0 16 16">
                                    <path
                                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                    <path
                                        d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z" />
                                </svg></span>
                            <span class="item">Consejeros Electos</span>
                        </a>
                    </li>
                </ul>

            </nav>

        </div>

        <% if (votacionAlumno.fecha_termino < fechaActualSys) { %>

            <% if(!votoAlumno) { %>

                <div class="container1">
                    <h1>Votación de Consejeros</h1>
                    <form id="formVoto" action="/inicio/votar" method="POST">
                        <div class="personas-list">
                            <ul class="item-list">
                                <% for (consejero of consejeros) { %>
                                    <li class="<%=consejero.id%>">
                                        <div class="candidato">
                                            <div class="divDatos">
                                                <div class="avatar">
                                                    <img src="<%= consejero.urlImg %>" alt="Avatar">
                                                </div>

                                                <div class="persona-info">
                                                    <h3>
                                                        <%= consejero.nombre %>
                                                            <%= consejero.apellido %>
                                                    </h3>
                                                    <p><b>Carrera:</b>
                                                        <%= consejero.carrera.carrera %>
                                                    </p>
                                                    <!-- <p><b>Id consejero:</b>
                                                        <%= consejero.id %>
                                                    </p> -->

                                                </div>
                                            </div>
                                            <input type="radio" id="candidato" name="candidato"
                                                value="<%= consejero.id %>" onclick="habilitarBoton()">
                                        </div>
                                    </li>
                                    <% } %>
                            </ul>
                        </div>
                        <button onclick="confirmar(event)" class="btn-vote" type="submit" id="btn-vote"
                            disabled>Votar</button>
                    </form>
                </div>

                <% } else { %>
                    <div class="container1">
                        <h1>Votación de Consejeros</h1>
                        <%- include('../partials/flash') %>
                        
                            <div class="notificacion-container">
                                <h2>¡Voto realizado!</h2>
                                <br>
                                <p>Ya has emitido un voto anteriormente.</p>
                                <br>
                                <p>Te notificaremos los resultados en tu correo institucional.</p>
                            </div>
                    </div>
                    <% } %>


                        <% } else { %>

                            <% if (votacionAlumno.fecha_termino < fechaActualSys) { %>

                            <div class="container1">

                                <%- include('../partials/flash') %>
                                    <div class="notificacion-container">
                                        <h2>¡Votación terminada!</h2>
                                        <p><a href="/inicio/resultados">Ver resultados</a></p>
                                    </div>
                            </div>

                            <% } else if (votacionAlumno.fecha_inicio > fechaActualSys) { %>

                                <div class="container1">

                                    <%- include('../partials/flash') %>
                                        <div class="notificacion-container">
                                            <h2>¡Votación aún no ha comenzado!</h2>
                                            <br>
                                            <p>La votación comienza el <%=votacionAlumno.fecha_inicio%> </a></p>
                                        </div>
                                </div>

                            <% } %>

                <% } %>
    </div>





    <script src="/js/script.js"></script>
    <script>
        function confirmar(event) {
            // Detenemos el envio del formulario.
            event.preventDefault();
            // Mostramos la alerta con las opciones "Confirmar" y "Rechazar"
            if (confirm("¿Desea confirmar el Envío de su Voto?")) {
                // Si se selecciona "Confirmar", enviamos el formulario
                document.getElementById("formVoto").submit();
            } else {
                // Si se selecciona "Rechazar", no hacemos nada
            }
        }

    </script>

    <script>
        function habilitarBoton() {


            var radioButtons = document.getElementsByName("candidato");
            var selectedId;

            for (var i = 0; i < radioButtons.length; i++) {
                if (radioButtons[i].checked) {
                    selectedId = radioButtons[i].value;
                    break;
                }
            }

            if (selectedId) {
                document.getElementById("btn-vote").disabled = false;
            } else {
                document.getElementById("btn-vote").disabled = true;
            }


            console.log(selectedId);
        }
    </script>
</body>

<%- include('../partials/footer') %>

</html>